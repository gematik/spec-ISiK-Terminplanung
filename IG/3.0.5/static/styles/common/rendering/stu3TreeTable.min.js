var Cookies;!function(e){function t(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function n(e){for(var t=e+"=",n=decodeURIComponent(document.cookie),i=n.split(";"),r=0;r<i.length;r++){for(var o=i[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}e.set=t,e.get=n}(Cookies||(Cookies={}));var TreeSettings=function(){function e(){}return e.ShowCommonResourceElements="ShowCommonResourceElements",e}(),Stu3TreeTable=function(){function e(e){this.TreeFlavourCookie="tree",this.TreeSettingsCookie="tree-settings",this.eventHandlerDictionary=[],this.isRootCollapsible=!1,this.hasDetailsPinned=!1,this.hasDetails=!1,this.parentContainerId="",e&&(this.isRootCollapsible=!0)}return e.prototype.init=function(e){TreeHelper.initPolyfills(),this.parentContainerId=e,this.initEventHandlerDictionary(),this.hasDetails=this.elementExists(".treetable-right-panel"),this.getContext().querySelector(".treetable").setAttribute("tabindex","0");var t=this.getTreeRenderingMode(),n=this.getTreeRenderingSettings();if(this.initSettingButtons(n),this.hasFlavourButtons()===!0){var i=this.getContext().querySelectorAll("[data-mode='"+t+"']")[0];this.switchTreeMode(i)}else this.renderTree(t,n)},e.prototype.expandNode=function(e,t,n){var i=this;if(t!==n){var r=this.getVisibleChildren(e.getAttribute("data-id"));r.forEach(function(e,r){var o=TreeHelper.hasClass(e,"collapsed");if(o){var a=e.querySelector(".vjoinexpandable");null==a&&(a=e.querySelector(".vjoinendexpandable")),null!=a&&a.click()}i.expandNode(e,t+1,n)})}},e.prototype.expandTree=function(){var e=parseInt(this.getContext().getAttribute("data-level"));if(e>1){var t=this.getContext().querySelector("tr");this.expandNode(t,1,e)}},e.prototype.renderTree=function(e,t){this.cleanPreviousMode();var n=this.getContext().querySelector(".treetable-wrapper");switch(n.className="treetable-wrapper "+e,e){case"snapshot":this.renderSnapshotMode(t);break;case"diff":this.renderDiffMode(t);break;case"hybrid":this.renderHybridMode(t)}this.indentTree(),this.registerForEvents(),this.expandTree(),Cookies.set(this.TreeFlavourCookie,e,30),Cookies.set(this.TreeSettingsCookie,this.getSettingsCookieValue(t),30)},e.prototype.renderSnapshotMode=function(e){var t=[this.hideStripedElement];this.hasTreeRenderingSetting(e,TreeSettings.ShowCommonResourceElements)||(t=t.concat(this.hideCommonElement)),this.visitTree(t)},e.prototype.renderDiffMode=function(e){var t=[this.hideNonConstrainedElement];this.visitTree(t)},e.prototype.renderHybridMode=function(e){var t=[];this.hasTreeRenderingSetting(e,TreeSettings.ShowCommonResourceElements)||(t=t.concat(this.hideCommonElement)),this.visitTree(t)},e.prototype.cleanPreviousMode=function(){for(var e=this.getContext().querySelectorAll(".treetable tr"),t=0;t<e.length;t++){e[t].style.display="table-row",TreeHelper.hasClass(e[t],"mode-hidden")&&TreeHelper.removeClass(e[t],"mode-hidden");var n=e[t].getElementsByTagName("td")[0];if(null!=n)for(var i=n.querySelectorAll("span.base"),r=0;r<i.length;r++)n.removeChild(i[r])}},e.prototype.visitTree=function(e){if(0!=e.length){var t=this.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])"),n=this.getChildren(t.dataset.id);this.visitElements(n,e)}},e.prototype.visitElements=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n],r=0;r<t.length;r++)t[r](i);var o=this.getChildren(i.dataset.id);o.length>0&&this.visitElements(o,t)}},e.prototype.hideStripedElement=function(e){TreeHelper.hideElement(e,"striped",!0)},e.prototype.hideNonConstrainedElement=function(e){TreeHelper.hideElement(e,"constraints",!1)},e.prototype.hideCommonElement=function(e){TreeHelper.hideElement(e,"common",!0)},e.prototype.getTreeRenderingMode=function(){var e=null;if(this.hasFlavourButtons()===!0&&(e=Cookies.get(this.TreeFlavourCookie)),null==e){var t=this.getContext().querySelector(".treetable-wrapper"),n=TreeHelper.hasClass(t,"diff"),i=TreeHelper.hasClass(t,"snapshot");return n?"diff":i?"snapshot":"hybrid"}return e},e.prototype.getTreeRenderingSettings=function(){if(this.hasFlavourButtons()===!0){var e=Cookies.get(this.TreeSettingsCookie);if(null!=e&&""!=e)return e.split(",")}return[]},e.prototype.hasTreeRenderingSetting=function(e,t){return e.filter(function(e){return e==t}).length>0},e.prototype.getSettingsCookieValue=function(e){return 0==e.length?"":e.filter(function(e){return""!=e}).join()},e.prototype.shouldHideElement=function(e,t){return"hybrid"!==t&&TreeHelper.hasClass(e,"mode-hidden")},e.prototype.addIndentation=function(e,t,n){t+=1;for(var i=0;i<e.length;i++){var r=t,o=e[i].dataset.id,a=e[i].getElementsByTagName("td")[0],l=this.getVisibleChildren(o),s=l.length>0,d=i===e.length-1;d?n[t-1]=TreeHelper.createSpan("base spacer"):n[t-1]=TreeHelper.createSpan("base vline");var c=null,h=a.parentElement;for(TreeHelper.hasClass(h,"collapsed")&&(c="collapsed");r-1>=1;)r-=1,r===t-1&&"collapsed"===c&&s&&!d?(a.insertBefore(TreeHelper.createSpan("base vjoinexpandable"),a.childNodes[0]),this.hideUnderlyingElements(h.dataset.id)):r===t-1&&"collapsed"===c&&s&&d?(a.insertBefore(TreeHelper.createSpan("base vjoinendexpandable"),a.childNodes[0]),this.hideUnderlyingElements(h.dataset.id)):r===t-1&&s&&d?a.insertBefore(TreeHelper.createSpan("base vjoinendcollapsible"),a.childNodes[0]):r===t-1&&s&&!d?a.insertBefore(TreeHelper.createSpan("base vjoincollapsible"),a.childNodes[0]):r!==t-1||s||d?r===t-1&&!s&&d?a.insertBefore(TreeHelper.createSpan("base vjoinend"),a.childNodes[0]):void 0!==n[r]&&a.insertBefore(n[r].cloneNode(),a.childNodes[0]):a.insertBefore(TreeHelper.createSpan("base vjoin"),a.childNodes[0]);this.addIndentation(l,t,n)}},e.prototype.toggleActiveButton=function(e){var t=this.getContext().querySelector(".treetable-buttons .tree-control .tree-button.active");TreeHelper.removeClass(t,"active"),TreeHelper.addClass(e,"active")},e.prototype.toggleActive=function(e,t){t?TreeHelper.removeClass(e,"active"):TreeHelper.addClass(e,"active")},e.prototype.toggleSettingButton=function(e){var t=TreeHelper.hasClass(e,"active");return this.toggleActive(e,t),!t},e.prototype.setSettingButton=function(e,t){var n=TreeHelper.hasClass(e,"active");n!=t&&this.toggleActive(e,n)},e.prototype.initSettingButtons=function(e){for(var t=this.getContext().querySelectorAll(".treetable-buttons .tree-settings .tree-button"),n=0;n<t.length;n++){var i=t[n],r=i.dataset.settings,o=this.hasTreeRenderingSetting(e,r);this.setSettingButton(i,o)}},e.prototype.switchTreeMode=function(e){if(this.hasFlavourButtons()===!0){var t=e.dataset.mode,n=this.getTreeRenderingSettings();this.toggleActiveButton(e),this.updateTree(t,n)}},e.prototype.toggleTreeSettings=function(e){if(this.hasFlavourButtons()===!0){var t=e.dataset.settings,n=this.getTreeRenderingMode(),i=this.getTreeRenderingSettings().filter(function(e){return e!==t}),r=this.toggleSettingButton(e);r&&(i=i.concat(t)),this.updateTree(n,i)}},e.prototype.updateTree=function(e,t){this.renderTree(e,t),this.hasDetailsPinned===!0&&this.pinRootNode(),this.resizeRightPanel(),this.updateSettingButtons(e)},e.prototype.updateSettingButtons=function(e){$("#"+TreeSettings.ShowCommonResourceElements).prop("disabled","diff"==e)},e.prototype.pinRootNode=function(){this.hasDetailsPinned=!0;var e=this.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])");this.showDetails(e);var t=this.getContext().querySelector(".details-popup .pin-control");TreeHelper.hasClass(t,"pinned")||(t.classList.remove("unpinned"),t.classList.add("pinned")),this.setTreetableWrapperHeight(),this.resizeRightPanel()},e.prototype.getContext=function(){return document.getElementById(this.parentContainerId)},e.prototype.markRow=function(e){var t=this.getContext().querySelector("tr.selected");t&&TreeHelper.removeClass(t,"selected"),t!=e&&TreeHelper.addClass(e,"selected")},e.prototype.initEventHandlerDictionary=function(){var e=this;e.eventHandlerDictionary.vjoinexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinexpandable","vjoincollapsible")},e.eventHandlerDictionary.vjoincollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoincollapsible","vjoinexpandable")},e.eventHandlerDictionary.vjoinendexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinendexpandable","vjoinendcollapsible")},e.eventHandlerDictionary.vjoinendcollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinendcollapsible","vjoinendexpandable")},e.eventHandlerDictionary.selectRow=function(t){if(!(TreeHelper.hasClass(t.target,"vjoinexpandable")||TreeHelper.hasClass(t.target,"vjoincollapsible")||TreeHelper.hasClass(t.target,"vjoinendexpandable")||TreeHelper.hasClass(t.target,"vjoinendcollapsible"))){var n=void 0!=t.currentTarget?t.currentTarget:t.target;e.markRow(n),e.hasDetails&&(e.hasDetailsPinned&&TreeHelper.hasClass(n,"detailsexpanded")===!1?e.changePopupContent(n):e.pinDetails())}},e.eventHandlerDictionary.pin=function(){e.pinDetails()},e.eventHandlerDictionary.showpopup=function(){e.hasDetailsPinned&&e.changePopupContent(this)},e.eventHandlerDictionary.popuphover=function(){e.hasDetailsPinned||e.showDetails(this)},e.eventHandlerDictionary.switchmode=function(){e.switchTreeMode(this)},e.eventHandlerDictionary.togglesettings=function(){e.toggleTreeSettings(this)},e.eventHandlerDictionary.hideDetails=function(){if(e.hasDetailsPinned===!1){var t=e.getContext().querySelector(".details-popup");if(null!=t){var n=t.dataset.id,i=e.getContext().querySelector('tr[data-id="'+n+'"]');e.hideExpandedDetails(i,t)}}},e.eventHandlerDictionary.keydown=function(t){function n(){var t=o();if(void 0==t){e.hasDetails&&e.pinRootNode();var n=e.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])");return void e.markRow(n)}var i=a(t);void 0!=i&&i.click()}function i(){var e=o();if(null!=e){var t=l(e);void 0!=t&&t.click()}}function r(){var e=o();if(void 0!=e){var t=e.querySelector(".vjoincollapsible");void 0==t&&(t=e.querySelector(".vjoinexpandable")),void 0==t&&(t=e.querySelector(".vjoinendexpandable")),void 0==t&&(t=e.querySelector(".vjoinendcollapsible"));var n=t;void 0!=n&&n.click()}}function o(){return e.getContext().querySelector("tr.selected")}function a(e){if(e)for(var t=e.nextElementSibling;t;){if(s(t))return t;t=t.nextElementSibling}}function l(e){if(e)for(var t=e.previousElementSibling;t;){if(s(t))return t;t=t.previousElementSibling}}function s(e){return e.offsetWidth>0||e.offsetHeight>0}if(!(t.target instanceof HTMLAnchorElement))switch(t.keyCode){case 40:t.preventDefault(),n();break;case 38:t.preventDefault(),i();break;case 32:case 13:t.preventDefault(),r()}}},e.prototype.showChildren=function(e,t,n,i){for(var r=this.getVisibleChildren(e),o=this.getTreeRenderingMode(),a=0;a<r.length;a++){var l=r[a];if(!this.shouldHideElement(l,o)){var s=l.dataset.id,d='[data-id="'+s+'"] td',c=l.querySelector(d+" .vjoinendcollapsible, "+d+" .vjoincollapsible");if(null!==c&&this.showChildren(s,null,null,null),l.style.display="table-row",TreeHelper.hasClass(l,"detailsexpanded")){var h=this.getContext().querySelector(".details-popup");h.style.display="block"}}}void 0!==t&&null!==t&&(t.className="base "+i,TreeHelper.registerEventSingle(t,"click",this.eventHandlerDictionary[i])),this.setRightPanelHeightSameAsLeftPanelHeight(),this.recalculateDetailsPopupPosition()},e.prototype.getVisibleChildren=function(e){for(var t=this.getChildren(e),n=[],i=0,r=0;r<t.length;r++)TreeHelper.hasClass(t[r],"mode-hidden")||(n[i]=t[r],i++);return n},e.prototype.getChildren=function(e){var t='[data-ParentId="'+e+'"]';return this.getContext().querySelectorAll(t)},e.prototype.getParentElementId=function(e){var t=e.parentElement.parentElement,n=t.dataset.id;return n},e.prototype.hideChildren=function(e,t,n,i){void 0!==t&&(this.hideUnderlyingElements(e),t.className="base "+i,TreeHelper.registerEventSingle(t,"click",this.eventHandlerDictionary[i]),this.setRightPanelHeightSameAsLeftPanelHeight(),this.recalculateDetailsPopupPosition())},e.prototype.hideUnderlyingElements=function(e){for(var t=this.getVisibleChildren(e),n=0;n<t.length;n++){var i=t[n];if(TreeHelper.hasClass(i,"detailsexpanded")){var r=this.getContext().querySelector(".details-popup");r.style.display="none"}var o=i.dataset.id;this.hideUnderlyingElements(o),i.style.display="none"}},e.prototype.indentTree=function(){for(var e="tr:not([data-parentId]):not(.mode-hidden)",t=this.getContext().querySelectorAll(e),n=0;n<t.length;n++){var i=1,r=t[n],o=r.dataset.id,a=this.getVisibleChildren(o),l=n===t.length-1,s=[];l?s[i]=TreeHelper.createSpan("base spacer"):s[i]=TreeHelper.createSpan("base vline"),this.addIndentation(a,i,s)}},e.prototype.registerForEvents=function(){this.registerEvent(".vjoinexpandable","click",this.eventHandlerDictionary.vjoinexpandable),this.registerEvent(".vjoincollapsible","click",this.eventHandlerDictionary.vjoincollapsible),this.registerEvent(".vjoinendcollapsible","click",this.eventHandlerDictionary.vjoinendcollapsible),this.registerEvent(".vjoinendexpandable","click",this.eventHandlerDictionary.vjoinendexpandable),this.registerEvent(".treetable-buttons .tree-control .tree-button","click",this.eventHandlerDictionary.switchmode),this.registerEvent(".treetable-buttons .tree-settings .tree-button","click",this.eventHandlerDictionary.togglesettings),this.registerEvent(".treetable","keydown",this.eventHandlerDictionary.keydown),this.registerEvent(".treetable tr","click",this.eventHandlerDictionary.selectRow),this.hasDetails&&(this.registerEvent(".details-popup .pin-control","click",this.eventHandlerDictionary.pin),this.registerEvent(".treetable tr","hover",this.eventHandlerDictionary.popuphover),this.registerEvent(".treetable-wrapper","mouseleave",this.eventHandlerDictionary.hideDetails))},e.prototype.changePopupContent=function(e){if(this.hasDetailsPinned){var t=e.getAttribute("class").indexOf("detailsexpanded")!==-1;this.hasDetailsPinned&&t||(this.showDetails(e),this.changePinIcon())}},e.prototype.registerEvent=function(e,t,n){for(var i=this.getContext().querySelectorAll(e),r=0;r<i.length;r++){var o=i[r];TreeHelper.registerEventSingle(o,t,n)}},e.prototype.pinDetails=function(){var e=this.getContext().querySelector(".details-popup"),t=e.dataset.id,n=this.getContext().querySelector('tr[data-id="'+t+'"]');this.hasDetailsPinned=!this.hasDetailsPinned,this.showDetails(n),this.changePinIcon()},e.prototype.changePinIcon=function(){var e=this.getContext().querySelector(".details-popup .pin-control");TreeHelper.hasClass(e,"pinned")?(e.classList.remove("pinned"),e.classList.add("unpinned")):(e.classList.remove("unpinned"),e.classList.add("pinned"))},e.prototype.getDetailsWrapperDiv=function(){var e="test",t=this.getContext().querySelector(".treetable-right-panel"),n=t.querySelector("#"+e);return void 0!==n&&null!==n||(n=document.createElement("div"),n.setAttribute("id",e),t.appendChild(n)),n},e.prototype.hideExpandedDetails=function(e,t){var n=this.getContext().querySelector(".detailsexpanded");void 0!==n&&null!==n&&(TreeHelper.removeClass(n,"detailsexpanded"),t.setAttribute("class","hidden"),t.removeAttribute("data-id"),this.setRightPanelHeightSameAsLeftPanelHeight())},e.prototype.showDetails=function(e){var t=e.getAttribute("data-id"),n=this.getDetailsWrapperDiv(),i=n.getAttribute("data-id"),r=t!=i;if(r){this.hideExpandedDetails(e,n);var o=e.querySelector(".details");if(TreeHelper.addClass(e,"detailsexpanded"),void 0!==o&&null!==o&&""!=o.innerHTML){n.innerHTML=o.innerHTML,n.setAttribute("data-id",t),n.setAttribute("class","details-popup"),n.style.display="block",this.setDetailsPopupPosition(n,e);var a=e.querySelector(".pin-control");a.classList.add("unpinned"),this.registerEvent(".details-popup .pin-control","click",this.eventHandlerDictionary.pin)}}},e.prototype.setDetailsPopupPosition=function(e,t){if(null!=t){for(var n=t.getBoundingClientRect(),i=this.getContext().querySelector(".treetable").getBoundingClientRect(),r=n.top-i.top,o=r+e.getBoundingClientRect().height,a=this.getLastVisibleRowElement(),l=a.getBoundingClientRect(),s=l.top-i.top+l.height;;){var d=o>s;{if(!d){var c=0,h=n.top-i.top>r;h&&(c=s-(r+e.getBoundingClientRect().height)),r=r<0?0:r+c;break}r-=5,o-=5}}e.style.marginTop=r+"px",this.resizeRightPanel()}},e.prototype.resizeRightPanel=function(){var e=this.calculateNewRightPanelHeight();if(void 0!=e){var t=this.getContext().querySelector(".treetable-right-panel");t.style.height=e+"px",this.setTreetableWrapperHeight()}},e.prototype.calculateNewRightPanelHeight=function(){var e=void 0,t=this.getContext().querySelector(".details-popup"),n=this.getContext().querySelector(".treetable").getBoundingClientRect();if(null!=t){var i=t.getBoundingClientRect();i.height>n.height?e=i.height:i.height<n.height&&(e=n.height)}else e=n.height;return e},e.prototype.setRightPanelHeightSameAsLeftPanelHeight=function(){var e=this.elementExists(".treetable-right-panel");if(e){var t=this.getContext().querySelector(".treetable-left-panel"),n=this.getContext().querySelector(".treetable-right-panel");n.style.height=t.clientHeight+"px",this.setTreetableWrapperHeight()}},e.prototype.recalculateDetailsPopupPosition=function(){var e=this.elementExists(".treetable-right-panel");if(e){var t=this.getDetailsWrapperDiv(),n=this.getContext().querySelector(".treetable tr.detailsexpanded");this.setDetailsPopupPosition(t,n)}},e.prototype.setTreetableWrapperHeight=function(){var e=this.getContext().querySelector(".treetable-left-panel"),t=this.getContext().querySelector(".treetable-right-panel"),n=this.getContext().querySelector(".treetable-wrapper"),i=Math.max(e.clientHeight,t.clientHeight);i>0&&(n.style.height=i+"px")},e.prototype.getLastVisibleRowElement=function(){var e,t=this.getContext().querySelectorAll("table tr");if(t)for(var n=0;n<t.length;n++)"none"!=t[n].style.display&&(e=t[n]);return e},e.prototype.hasFlavourButtons=function(){return null!=this.getContext().querySelector(".treetable-buttons")},e.prototype.elementExists=function(e){return void 0!=this.getContext().querySelector(e)},e}(),InstanceTree=function(){function e(){this.eventHandlerDictionary=[],this.parentContainerId="",this.nodeResolver=new InMemoryNodeResolver}return e.prototype.init=function(e){TreeHelper.initPolyfills(),this.parentContainerId=e,this.initEventHandlerDictionary(),this.getContext().querySelector(".treetable").setAttribute("tabindex","0"),this.nodeResolver.init(this.getContext()),this.indentTree(),this.registerForEvents(),this.expandTree()},e.prototype.expandTree=function(){var e=parseInt(this.getContext().getAttribute("data-level"));if(e>1){var t=this.getContext().querySelector("tr");this.expandNode(t,1,e)}},e.prototype.expandNode=function(e,t,n){var i=this;if(t!==n){var r=this.getVisibleNodes(e.getAttribute("data-id"));r.forEach(function(e,r){var o=TreeHelper.hasClass(e,"collapsed");if(o){var a=e.querySelector(".vjoinexpandable");null==a&&(a=e.querySelector(".vjoinendexpandable")),null!=a&&a.click()}i.expandNode(e,t+1,n)})}},e.prototype.getVisibleNodes=function(e){for(var t='[data-ParentId="'+e+'"]',n=this.getContext().querySelectorAll(t),i=[],r=0,o=0;o<n.length;o++)TreeHelper.hasClass(n[o],"mode-hidden")||(i[r]=n[o],r++);return i},e.prototype.getContext=function(){return document.getElementById(this.parentContainerId)},e.prototype.markRow=function(e){var t=this.getContext().querySelector("tr.selected");t&&TreeHelper.removeClass(t,"selected"),t!=e&&TreeHelper.addClass(e,"selected")},e.prototype.initEventHandlerDictionary=function(){var e=this;e.eventHandlerDictionary.vjoinexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoincollapsible")},e.eventHandlerDictionary.vjoincollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinexpandable")},e.eventHandlerDictionary.vjoinendexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinendcollapsible")},e.eventHandlerDictionary.vjoinendcollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinendexpandable")},e.eventHandlerDictionary.selectRow=function(t){if(!(TreeHelper.hasClass(t.target,"vjoinexpandable")||TreeHelper.hasClass(t.target,"vjoincollapsible")||TreeHelper.hasClass(t.target,"vjoinendexpandable")||TreeHelper.hasClass(t.target,"vjoinendcollapsible"))){var n=void 0!=t.currentTarget?t.currentTarget:t.target;e.markRow(n)}},e.eventHandlerDictionary.keydown=function(t){function n(){var t=o();if(void 0==t){var n=e.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])");return void e.markRow(n)}var i=a(t);void 0!=i&&i.click()}function i(){var e=o();if(null!=e){var t=l(e);void 0!=t&&t.click()}}function r(){var e=o();if(void 0!=e){var t=e.querySelector(".vjoincollapsible");void 0==t&&(t=e.querySelector(".vjoinexpandable")),void 0==t&&(t=e.querySelector(".vjoinendexpandable")),void 0==t&&(t=e.querySelector(".vjoinendcollapsible"));var n=t;void 0!=n&&n.click()}}function o(){return e.getContext().querySelector("tr.selected")}function a(e){if(e)for(var t=e.nextElementSibling;t;){if(s(t))return t;t=t.nextElementSibling}}function l(e){if(e)for(var t=e.previousElementSibling;t;){if(s(t))return t;t=t.previousElementSibling}}function s(e){return e.offsetWidth>0||e.offsetHeight>0}if(!(t.target instanceof HTMLAnchorElement))switch(t.keyCode){case 40:t.preventDefault(),n();break;case 38:t.preventDefault(),i();break;case 32:case 13:t.preventDefault(),r()}}},e.prototype.showChildren=function(e,t,n){for(var i=this.nodeResolver.findChildren(e),r=0;r<i.length;r++){var o=i[r],a=o.dataset.id,l='[data-id="'+a+'"] td',s=o.querySelector(l+" .vjoinendcollapsible, "+l+" .vjoincollapsible");null!==s&&this.showChildren(a,null,null),o.style.display="table-row"}void 0!==t&&null!==t&&(t.className="base "+n,TreeHelper.registerEventSingle(t,"click",this.eventHandlerDictionary[n]))},e.prototype.getParentElementId=function(e){var t=e.parentElement.parentElement,n=t.dataset.id;return n},e.prototype.hideChildren=function(e,t,n){void 0!==t&&(this.hideUnderlyingElements(e),t.className="base "+n,TreeHelper.registerEventSingle(t,"click",this.eventHandlerDictionary[n]))},e.prototype.hideUnderlyingElements=function(e){for(var t=this.nodeResolver.findChildren(e),n=0;n<t.length;n++){var i=t[n],r=i.dataset.id;this.hideUnderlyingElements(r),i.style.display="none"}},e.prototype.indentTree=function(){for(var e=this.nodeResolver.findRoots(),t=0;t<e.length;t++){var n=1,i=e[t],r=i.dataset.id,o=this.nodeResolver.findChildren(r),a=t===e.length-1,l=[];a?l[n]=TreeHelper.createSpan("base spacer"):l[n]=TreeHelper.createSpan("base vline"),this.addIndentation(o,n,l)}},e.prototype.addIndentation=function(e,t,n){t+=1;for(var i=0;i<e.length;i++){var r=t,o=e[i].dataset.id,a=e[i].getElementsByTagName("td")[0],l=this.nodeResolver.findChildren(o),s=l.length>0,d=i===e.length-1;d?n[t-1]=TreeHelper.createSpan("base spacer"):n[t-1]=TreeHelper.createSpan("base vline");var c=null,h=a.parentElement;for(TreeHelper.hasClass(h,"collapsed")&&(c="collapsed");r-1>=1;)r-=1,r===t-1&&"collapsed"===c&&s&&!d?(a.insertBefore(TreeHelper.createSpan("base vjoinexpandable"),a.childNodes[0]),this.hideUnderlyingElements(h.dataset.id)):r===t-1&&"collapsed"===c&&s&&d?(a.insertBefore(TreeHelper.createSpan("base vjoinendexpandable"),a.childNodes[0]),this.hideUnderlyingElements(h.dataset.id)):r===t-1&&s&&d?a.insertBefore(TreeHelper.createSpan("base vjoinendcollapsible"),a.childNodes[0]):r===t-1&&s&&!d?a.insertBefore(TreeHelper.createSpan("base vjoincollapsible"),a.childNodes[0]):r!==t-1||s||d?r===t-1&&!s&&d?a.insertBefore(TreeHelper.createSpan("base vjoinend"),a.childNodes[0]):void 0!==n[r]&&a.insertBefore(n[r].cloneNode(),a.childNodes[0]):a.insertBefore(TreeHelper.createSpan("base vjoin"),a.childNodes[0]);this.addIndentation(l,t,n)}},e.prototype.registerForEvents=function(){this.registerEvent(".vjoinexpandable","click",this.eventHandlerDictionary.vjoinexpandable),this.registerEvent(".vjoincollapsible","click",this.eventHandlerDictionary.vjoincollapsible),this.registerEvent(".vjoinendcollapsible","click",this.eventHandlerDictionary.vjoinendcollapsible),this.registerEvent(".vjoinendexpandable","click",this.eventHandlerDictionary.vjoinendexpandable),this.registerEvent(".treetable","keydown",this.eventHandlerDictionary.keydown),this.registerEvent(".treetable tr","click",this.eventHandlerDictionary.selectRow)},e.prototype.registerEvent=function(e,t,n){for(var i=this.getContext().querySelectorAll(e),r=0;r<i.length;r++){var o=i[r];TreeHelper.registerEventSingle(o,t,n)}},e}(),InstanceTreeNode=function(){function e(){}return e}(),InMemoryNodeResolver=function(){function e(){this.allNodes=[]}return e.prototype.init=function(e){var t=this,n=e.querySelectorAll("tr");n.forEach(function(e,n){var i=new InstanceTreeNode;i.id=e.dataset.id,i.parentid=e.dataset.parentid,i.element=e,t.allNodes.push(i)})},e.prototype.findChildren=function(e){var t=[];return this.allNodes.forEach(function(n,i){n.parentid==e&&t.push(n.element)}),t},e.prototype.findRoots=function(){var e=[];return this.allNodes.forEach(function(t,n){void 0==t.parentid&&e.push(t.element)}),e},e}(),TreeHelper;!function(e){function t(e,t,n){switch(t){case"click":e.onclick=n;break;case"hover":e.onmouseover=n;break;default:e.addEventListener(t,n)}}function n(e){var t=e.join(" ");return t}function i(e){var t=e.getAttribute("class");void 0!==t&&null!==t||(t="");var n=t.split(" ");return n}function r(t,n){var i=e.getCurrentClassesAsArray(t),r=i.indexOf(n);i.splice(r,1);var o=e.convertClassArrayNamesToString(i);t.setAttribute("class",o)}function o(t,n){var i=e.getCurrentClassesAsArray(t);i.push(n);var r=e.convertClassArrayNamesToString(i);t.setAttribute("class",r)}function a(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function l(t,n,i){e.hasClass(t,n)==i&&"none"!=t.style.display&&(t.style.display="none",e.addClass(t,"mode-hidden"))}function s(e){var t=document.createElement("SPAN");return t.className=e,t}function d(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1})}e.registerEventSingle=t,e.convertClassArrayNamesToString=n,e.getCurrentClassesAsArray=i,e.removeClass=r,e.addClass=o,e.hasClass=a,e.hideElement=l,e.createSpan=s,e.initPolyfills=d}(TreeHelper||(TreeHelper={}));